/* General page styles */
body {
    margin: 0;
    font-family: 'Comic Sans MS', 'Arial', sans-serif;
    background: linear-gradient(180deg, #f8f9fd 0%, #fdeff7 50%, #eafafc 100%);
    color: #333;
}

h1, h2, h3, p {
    margin: 0;
}

header {
    text-align: center;
    padding: 1rem;
    color: #333;
}

.subtitle {
    font-size: 1.2rem;
    margin-top: 0.5rem;
    color: #555;
}

/* Loading screen */
.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: #fff8fc;
    z-index: 10;
}

/* Custom loading icon */
.loading-icon {
    width: 120px;
    height: 120px;
    animation: spin 2s linear infinite;
    margin-bottom: 1rem;
}

.spinner {
    width: 80px;
    height: 80px;
    border: 8px solid #ffd6e5;
    border-top: 8px solid #ff80b5;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.app {
    max-width: 800px;
    margin: 0 auto;
    padding: 1rem;
}

/* Pack selection container */
.pack-selection {
    padding-bottom: 1rem;
}

/* Pack selector container: vertical list with scrolling.  Children can scroll
   up and down to view all available packs.  The height is limited so that
   the footer and header remain visible on small devices. */
.pack-selector {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 0 1rem;
    margin: 1rem 0;
    overflow-y: auto;
    overflow-x: hidden;
    /* Increase the height available for the pack list so that
       children can scroll through all packs vertically.  Subtract a
       smaller amount from the viewport height to leave room for the
       header and footer. */
    /* Allow more vertical space for the pack list so that children can scroll
       through all available packs without feeling constrained.  Reduce the
       subtraction from the viewport height so the list fills more of the
       screen while still leaving space for the header and footer. */
    max-height: calc(100vh - 160px);
    -webkit-overflow-scrolling: touch;
}

/* Hide scroll bar in Webkit browsers for a cleaner look */
.pack-selector::-webkit-scrollbar {
    display: none;
}

/* Pack cards for vertical list.  Cards span the full width and align
   content horizontally.  Each card shows a preview image or colour
   swatch alongside the pack label. */
.pack-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    padding: 0.5rem 0.75rem;
    border-radius: 16px;
    background-color: #ffeef7;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    overflow: hidden;
    text-align: left;
    transition: transform 0.1s ease;
}
.pack-card:active {
    transform: scale(0.97);
}

/* Preview area within each card */
.pack-preview {
    width: 70px;
    height: 70px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
}
.pack-preview img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Label next to the preview */
.pack-label {
    font-weight: bold;
    font-size: 1.2rem;
    color: #333;
    flex-grow: 1;
}

/* Viewer for full‑screen item display */
/* Viewer: occupies most of the available viewport height.  Items are
   centered within and scaled responsively to fill the space. */
.viewer {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Occupy most of the viewport minus a smaller margin so the current
       item can grow larger on mobile.  Reducing the subtraction value
       provides more vertical space for the item display. */
    height: calc(100vh - 140px);
    max-width: 100%;
    overflow: hidden;
    padding: 2rem 1rem;
}

/* Wrapper for an individual item in the viewer */
/* Container for the current item.  Expand to fill available
   space so that images and coloured tiles can take up more of the
   screen. */
.item-view {
    width: 100%;
    max-width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 1rem;
    flex-grow: 1;
}

/* Image displayed for animals, shapes, fruits and seasons */
/* Images for animals, shapes, fruits and seasons fill most of the
   screen while preserving aspect ratio. */
.item-image {
    max-width: 100%;
    /* Allow images to take up even more of the screen vertically */
    max-height: 75vh;
    height: auto;
    display: block;
}

/* Large text for letters and numbers */
.text-large {
    font-size: 6rem;
    font-weight: bold;
    color: #333;
}

/* Colour name overlay inside coloured tiles */
.colour-name {
    font-size: 3rem;
    font-weight: bold;
}

/* Ensure viewer is hidden when the hidden attribute is present */
.viewer[hidden] {
    display: none !important;
}

/* Container for dynamic item content */
.viewer-content {
    width: 100%;
    /* Remove the max‑width restriction so the item can expand to the full
       width of the phone frame.  It will still be centred via the viewer.
       */
    max-width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
}

/* Exit button */
.exit-btn {
    position: absolute;
    top: 1rem;
    left: 1rem;
    font-size: 2rem;
    border: none;
    background: none;
    color: #ff80b5;
    cursor: pointer;
    line-height: 1;
}

/* Navigation buttons */
.nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 2rem;
    border: none;
    background: none;
    color: #ff80b5;
    padding: 0.5rem 0.75rem;
    cursor: pointer;
    line-height: 1;
}
.prev-btn {
    left: 0.5rem;
}
.next-btn {
    right: 0.5rem;
}

/* Colour tile for viewer */
/* Colour tiles scale up on larger screens to take up more space. */
.colour-view {
    width: 70vw;
    height: 70vw;
    max-width: 400px;
    max-height: 400px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    margin-bottom: 1rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

/* Large emoji and label styles */
.icon-large {
    font-size: 6rem;
}
.label-large {
    font-size: 2rem;
    margin-top: 1rem;
    color: #333;
}

@media (max-width: 500px) {
    .viewer {
        /* Same reduction on mobile to give more space to the item */
        height: calc(100vh - 140px);
        padding: 1.5rem 1rem;
    }
    .colour-view {
        width: 80vw;
        height: 80vw;
        max-width: 250px;
        max-height: 250px;
        font-size: 2rem;
    }
    .item-image {
        /* Expand images fully within the phone frame on small screens */
        max-width: 100%;
        max-height: 60vh;
    }
    .label-large {
        font-size: 1.5rem;
    }
    .nav-btn {
        font-size: 1.5rem;
    }
    .exit-btn {
        font-size: 1.5rem;
    }
}

/* Footer */
footer {
    text-align: center;
    margin-top: 2rem;
    font-size: 0.9rem;
    color: #666;
}

/* Responsive adjustments */
@media (max-width: 500px) {
    .item {
        height: 90px;
    }
}

/* ===================== Section menu ===================== */
/* Container for the four main sections (Learn, Colour, Draw, Games).  The
   cards stack vertically with generous spacing and centred alignment. */
.section-menu {
    /* Display the section cards in a responsive grid so that
       the four options (Learn, Colour, Draw, Games) appear as
       equally‑sized tiles.  The grid automatically wraps on small
       devices. */
    display: grid;
    /* Always display the four section tiles in a 2×2 grid.  Using
       repeat(2,1fr) ensures that two columns are displayed even on
       narrower screens within the phone frame. */
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    justify-items: center;
    padding: 1rem;
}

/* Cards for each top‑level section.  These resemble the pack cards but
   feature an emoji instead of a preview image. */
.section-card {
    /* Make each section card a square tile with centred content.
       The tiles will scale to fill available space in the grid. */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 140px;
    max-width: 200px;
    max-height: 140px;
    padding: 0.75rem;
    border-radius: 20px;
    background-color: #ffeef7;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: transform 0.1s ease;
}
.section-card:active {
    transform: scale(0.97);
}

/* Emoji icon inside each section card */
.section-icon {
    width: 64px;
    height: 64px;
    border-radius: 20px;
    background: linear-gradient(135deg, #ffeffa, #f6f0fc);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.2rem;
    margin-bottom: 0.5rem;
}

/* Label text for each section */
.section-label {
    font-size: 1.2rem;
    font-weight: bold;
    color: #333;
    text-align: center;
}

/* Hide section menu when [hidden] attribute is present */
.section-menu[hidden] {
    display: none !important;
}

/* Hide learn, colour, draw and games sections when hidden attribute is present */
.learn-section[hidden], .color-section[hidden], .draw-section[hidden], .games-section[hidden] {
    display: none !important;
}

/* ===================== Draw and Colour canvases ===================== */
/* Wrapper around canvas and palette for colouring and drawing */
.canvas-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
}

/* Canvas element used for drawing/colouring */
.draw-canvas {
    width: 100%;
    height: 400px;
    background-color: #ffffff;
    border: 2px solid #ffd6e5;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    touch-action: none; /* Prevent default touch scrolling while drawing */
}

/* Colour palette for drawing/colouring.  Colours appear as circles. */
.palette {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
}
.palette .swatch {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    cursor: pointer;
}
.palette .swatch.selected {
    outline: 3px solid #ff80b5;
}

/* ===================== Colour gallery ===================== */
/* Grid of images to choose from in the colouring section */
.color-gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 1rem;
}
.color-thumb {
    width: 80px;
    height: 80px;
    border-radius: 16px;
    background-color: #ffeef7;
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.1s ease;
}
.color-thumb:active {
    transform: scale(0.97);
}
.color-thumb img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    /* Display images in the colouring gallery in grayscale so
       children can colour them.  The opacity is reduced slightly
       to emphasise the outline until they start colouring. */
    filter: grayscale(1);
    opacity: 0.7;
}

/* Hide gallery and canvas container when hidden attribute is set */
.color-gallery[hidden], .color-canvas-container[hidden] {
    display: none !important;
}

/* Buttons for clearing canvas and navigating back from colour canvas */
.clear-btn, .back-btn {
    display: inline-block;
    padding: 0.5rem 1rem;
    margin: 0.5rem 0;
    background-color: #ff80b5;
    color: #ffffff;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.clear-btn:active, .back-btn:active {
    transform: scale(0.97);
}

/* ===================== Settings button and modal ===================== */
.settings-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    color: #ff80b5;
    cursor: pointer;
}
.settings-btn:active {
    transform: scale(0.9);
}

/* Settings modal overlay */
.settings-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
}
.settings-content {
    background: #ffffff;
    padding: 1.5rem;
    border-radius: 16px;
    width: 80%;
    max-width: 350px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    text-align: center;
}
.settings-content h2 {
    margin-bottom: 1rem;
}
.setting-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    font-size: 1.1rem;
}
.close-settings-btn {
    margin-top: 1rem;
    background-color: #ff80b5;
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 0.5rem 1rem;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Hide modal when hidden attribute is present */
.settings-modal[hidden] {
    display: none;
}

/* ===================== Sorting Game ===================== */
/* Container for the sorting game.  Aligns elements vertically with spacing. */
.sort-game {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    margin-top: 1rem;
}
/* Drop area holds the target slots where shapes must be placed. */
.drop-area {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
}
/* Individual drop slot.  Uses a dashed border to indicate where to drop. */
.drop-slot {
    width: 80px;
    height: 80px;
    border: 2px dashed #cccccc;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #fdf6fb;
    transition: background-color 0.2s, border-color 0.2s;
}
/* When a shape is correctly placed, highlight the slot. */
.drop-slot.correct {
    background-color: #e5ffe5;
    border-color: #4caf50;
}
/* Draggable area holds the shapes the child can drag to the drop slots. */
.draggable-area {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
}
/* Draggable item styling.  Similar to colour gallery but uses move cursor. */
.draggable-item {
    width: 80px;
    height: 80px;
    border-radius: 12px;
    background-color: #ffeef7;
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: move;
    transition: transform 0.1s ease;
}
.draggable-item:active {
    transform: scale(0.97);
}
.draggable-item img {
    width: 60%;
    height: 60%;
    object-fit: contain;
}
/* Success message shown when all shapes are correctly placed */
#game-success-message {
    font-size: 1.2rem;
    font-weight: bold;
    color: #27ae60;
    margin-top: 1rem;
    display: none;
}

/* ===================== Zoom controls ===================== */
/* Buttons to zoom in and out of the colouring/drawing canvas.  The
   controls are placed below the palette and centred. */
.zoom-controls {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
}
.zoom-controls button {
    padding: 0.4rem 0.8rem;
    background-color: #ff80b5;
    color: #ffffff;
    border: none;
    border-radius: 8px;
    font-size: 0.9rem;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.zoom-controls button:active {
    transform: scale(0.95);
}
